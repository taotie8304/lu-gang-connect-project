# 鲁港通企业版 - 部署检查清单

## ✅ 部署前检查

- [ ] 堡塔面板v11已安装
- [ ] Docker管理器已安装
- [ ] MySQL 5.6正在运行（端口3306）
- [ ] 已创建数据库 `lugang_connect`
- [ ] 数据库用户 `lugang_connect` 已创建
- [ ] 数据库访问权限已设置（允许所有人或172.17.0.1）

## ✅ 文件上传

- [ ] 整个 `lugang-connect-enterprise` 文件夹已上传到 `/www/wwwroot/`
- [ ] 确认 `.env.baota` 文件存在
- [ ] 确认 `Dockerfile` 文件存在
- [ ] 确认 `docker-compose.yml` 文件存在

## ✅ 配置确认

当前数据库配置（`.env.baota`）：
```
数据库名: lugang_connect
用户名: lugang_connect
密码: huijin8304
主机: host.docker.internal:3306
```

## ✅ Docker部署

- [ ] 在Docker管理中创建Compose编排
- [ ] 编排名称：`lugang-enterprise`
- [ ] 编排路径：`/www/wwwroot/lugang-connect-enterprise`
- [ ] 点击构建/启动
- [ ] 等待构建完成（约10-20分钟）
- [ ] 容器状态显示"运行中"

## ✅ 访问测试

- [ ] 访问 `http://服务器IP:8080` 能看到登录页面
- [ ] 访问 `http://服务器IP:8080/api/lugang/demo` 返回JSON
- [ ] 使用 root/123456 能登录管理后台
- [ ] 登录后能看到"鲁港通企业版"标题

## ✅ 域名配置（可选）

- [ ] 创建网站（纯静态）
- [ ] 配置反向代理到 `http://127.0.0.1:8080`
- [ ] 配置SSL证书
- [ ] 域名访问正常

## 📝 重要配置文件

| 文件 | 用途 |
|------|------|
| `.env.baota` | 环境配置，包含数据库连接信息 |
| `Dockerfile` | Docker镜像构建配置（三阶段构建） |
| `docker-compose.yml` | Docker Compose编排配置 |

## 🔧 常用命令

```bash
# 进入项目目录
cd /www/wwwroot/lugang-connect-enterprise

# 查看容器日志
docker logs lugang-enterprise

# 查看实时日志
docker logs -f lugang-enterprise

# 重启容器
docker restart lugang-enterprise

# 重新构建
docker-compose down
docker-compose up -d --build
```

## 📞 默认账号

- 用户名：`root`
- 密码：`123456`
- **首次登录后请立即修改密码！**

## ⚠️ 注意事项

1. **不要创建MySQL容器** - 使用宿主机已有的MySQL 5.6
2. **MySQL 5.6兼容性** - 使用 `charset=utf8`（不是utf8mb4）
3. **数据库权限** - 必须允许Docker网络访问（172.17.0.1或所有人）
4. **构建时间** - 首次构建需要10-20分钟，请耐心等待
