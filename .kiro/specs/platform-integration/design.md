# Design Document: é²æ¸¯é€šå¹³å°é›†æˆ

## Overview

æœ¬è®¾è®¡æ–‡æ¡£æè¿°é²æ¸¯é€šè·¨å¢ƒAIæ™ºèƒ½å¹³å°çš„å®Œæ•´æŠ€æœ¯å®ç°æ–¹æ¡ˆï¼ŒåŒ…æ‹¬å“ç‰ŒåŒ–å®Œå–„ã€ç”¨æˆ·ç³»ç»Ÿã€å……å€¼ç³»ç»Ÿã€ä»¥åŠ FastGPT ä¸ One API çš„æ·±åº¦é›†æˆã€‚

### æŠ€æœ¯æ ˆ

- **å‰ç«¯**: Next.js 14 + TypeScript + Chakra UI
- **åç«¯**: Next.js API Routes + MongoDB
- **One API**: Go è¯­è¨€åç«¯ï¼Œæä¾›ç”¨æˆ·é¢åº¦å’Œå……å€¼ç®¡ç†
- **éƒ¨ç½²**: Docker + Nginx åå‘ä»£ç†

### ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·æµè§ˆå™¨                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Nginx åå‘ä»£ç†                            â”‚
â”‚  www.airscend.com:443 â†’ FastGPT:3210                        â”‚
â”‚  api.airscend.com:443 â†’ One API:8080                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                       â”‚
                    â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      FastGPT (3210)      â”‚    â”‚     One API (8080)       â”‚
â”‚  - èŠå¤©ç•Œé¢               â”‚    â”‚  - ç”¨æˆ·é¢åº¦ç®¡ç†           â”‚
â”‚  - ç”¨æˆ·è®¤è¯               â”‚â—„â”€â”€â–ºâ”‚  - å……å€¼ç³»ç»Ÿ              â”‚
â”‚  - åº”ç”¨ç®¡ç†               â”‚    â”‚  - API å¯†é’¥ç®¡ç†          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                               â”‚
            â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      MongoDB             â”‚    â”‚      SQLite/MySQL        â”‚
â”‚  - ç”¨æˆ·æ•°æ®               â”‚    â”‚  - ç”¨æˆ·é¢åº¦              â”‚
â”‚  - èŠå¤©è®°å½•               â”‚    â”‚  - å……å€¼è®°å½•              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Architecture

### æ¨¡å—åˆ’åˆ†

1. **å“ç‰ŒåŒ–æ¨¡å—**: é™æ€èµ„æºå’Œé…ç½®ç®¡ç†
2. **ç”¨æˆ·è®¤è¯æ¨¡å—**: æ³¨å†Œã€ç™»å½•ã€æƒé™æ§åˆ¶
3. **é¢åº¦ç®¡ç†æ¨¡å—**: FastGPT ä¸ One API é¢åº¦åŒæ­¥
4. **ç®¡ç†åå°æ¨¡å—**: ç”¨æˆ·ç®¡ç†ã€é…ç½®ç®¡ç†
5. **æ™®é€šç”¨æˆ·èŠå¤©ç•Œé¢**: æ¸¯è¯é€šé£æ ¼çš„ç®€æ´èŠå¤©ç•Œé¢

### æ•°æ®æµ

```
ç”¨æˆ·æ³¨å†Œ â†’ FastGPT åˆ›å»ºç”¨æˆ· â†’ è°ƒç”¨ One API åˆ›å»ºå¯¹åº”ç”¨æˆ· â†’ åˆ†é…åˆå§‹é¢åº¦
ç”¨æˆ·å……å€¼ â†’ One API å¤„ç†å……å€¼ â†’ Webhook é€šçŸ¥ FastGPT â†’ æ›´æ–°ç”¨æˆ·é¢åº¦æ˜¾ç¤º
ç”¨æˆ·èŠå¤© â†’ FastGPT æ£€æŸ¥é¢åº¦ â†’ è°ƒç”¨ One API æ‰£å‡é¢åº¦ â†’ è¿”å›å“åº”
```

## Components and Interfaces

### 1. å“ç‰ŒåŒ–ç»„ä»¶

#### Logo é…ç½®

**æ–‡ä»¶ä½ç½®**: `packages/global/common/system/constants.ts`

```typescript
// ä¿®æ”¹ Logo è·¯å¾„ï¼Œç¡®ä¿æ–‡ä»¶å­˜åœ¨
export const LOGO_ICON = `/icon/logo.svg`;  // æ–¹å½¢ Logo
export const LOGO_BANNER = `/imgs/chat/lugang_banner.svg`;  // æ¨ªå¹… Logo
```

**éœ€è¦æ·»åŠ çš„ Logo æ–‡ä»¶**:
- `/public/icon/logo.svg` - æ–¹å½¢ Logo (å·²å­˜åœ¨ï¼Œéœ€ç¡®è®¤)
- `/public/icon/logo.png` - PNG æ ¼å¼ Logo (éœ€æ·»åŠ )
- `/public/imgs/chat/lugang_banner.svg` - æ¨ªå¹… Logo
- `/public/favicon.ico` - ç½‘ç«™å›¾æ ‡

### 2. ç™»å½•/æ³¨å†Œé¡µé¢è®¾è®¡ï¼ˆæ¸¯è¯é€šé£æ ¼ï¼‰

#### è®¾è®¡è§„èŒƒ

å‚è€ƒæ¸¯è¯é€šï¼ˆHKChatï¼‰çš„è®¾è®¡é£æ ¼ï¼Œè¿›è¡Œä»¥ä¸‹å®šåˆ¶ï¼š

**é¢œè‰²æ–¹æ¡ˆ**:
- ä¸»è‰²è°ƒï¼šæ·¡è“è‰² `#E8F4FD`ï¼ˆæ›¿ä»£æ¸¯è¯é€šçš„ç²‰çº¢è‰²ï¼‰
- å¼ºè°ƒè‰²ï¼šè“è‰² `#3B82F6`
- èƒŒæ™¯æ¸å˜ï¼š`linear-gradient(135deg, #E8F4FD 0%, #DBEAFE 100%)`
- æŒ‰é’®é¢œè‰²ï¼š`#3B82F6`ï¼ˆè“è‰²ï¼‰

**ç™»å½•é¡µé¢å¸ƒå±€**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [é²æ¸¯é€š Logo]                          [ç¹é«”] [English]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   æ¯”å¤–åœ‹AIæ›´æ‡‚ä¸­åœ‹çš„ä½                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                                          â”‚  æ‰‹æœºé¢„è§ˆå›¾   â”‚  â”‚
â”‚   å°åŠ©æ‰‹å¸®ä½ è§£å†³å„ç§é—®é¢˜...               â”‚  (èŠå¤©ç•Œé¢)   â”‚  â”‚
â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚   â”‚ ä¸æƒ³ä¸‹è½½ï¼Ÿç›´æ¥ä½¿ç”¨ç½‘é¡µç‰ˆ  â”‚ â† ç‚¹å‡»è¿›å…¥ç™»å½•               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç™»å½•è¡¨å•æ ·å¼**:
```css
.login-card {
  background: white;
  border-radius: 16px;
  box-shadow: 0 4px 20px rgba(59, 130, 246, 0.1);
  padding: 32px;
}

.login-button {
  background: linear-gradient(135deg, #3B82F6 0%, #60A5FA 100%);
  color: white;
  border-radius: 8px;
  padding: 12px 24px;
}

.register-link {
  color: #3B82F6;
  text-decoration: underline;
}
```

#### ç”¨æˆ·è®¤è¯æ¥å£

**ç«¯ç‚¹**: `POST /api/support/user/register`

```typescript
interface RegisterRequest {
  email: string;
  password: string;
  code: string;  // é‚®ç®±éªŒè¯ç 
}

interface RegisterResponse {
  user: UserType;
  token: string;
}
```

#### ç™»å½•åè·¯ç”±é€»è¾‘ï¼ˆå…³é”®ä¿®å¤ï¼‰

**é—®é¢˜**: å½“å‰ç®¡ç†å‘˜ç™»å½•åä¼šå…ˆé—ªè¿‡èŠå¤©ç•Œé¢å†è·³è½¬åˆ°åå°

**ä¿®å¤æ–¹æ¡ˆ**: åœ¨æœåŠ¡ç«¯åˆ¤æ–­ç”¨æˆ·è§’è‰²ï¼Œç›´æ¥è¿”å›æ­£ç¡®çš„è·³è½¬è·¯å¾„

**æ–‡ä»¶ä½ç½®**: `src/pages/login/index.tsx`

```typescript
const loginSuccess = useCallback(
  async (res: LoginSuccessResponse) => {
    setUserInfo(res.user);
    
    // å…³é”®ï¼šæ ¹æ®ç”¨æˆ·è§’è‰²ç›´æ¥è·³è½¬ï¼Œä¸ç»è¿‡ä¸­é—´é¡µé¢
    const isAdmin = res.user.role === 'admin' || res.user.role === 'root';
    const targetRoute = isAdmin ? '/dashboard/agent' : '/chat';
    
    // ç›´æ¥è·³è½¬ï¼Œä¸ä½¿ç”¨ replace é¿å…é—ªçƒ
    router.push(targetRoute);
  },
  [router, setUserInfo]
);
```

**æ–‡ä»¶ä½ç½®**: `src/pages/index.tsx`ï¼ˆé¦–é¡µè·¯ç”±ï¼‰

```typescript
// ä¿®å¤ï¼šé¦–é¡µä¸åº”è¯¥åšè·¯ç”±åˆ¤æ–­ï¼Œåº”è¯¥ç›´æ¥é‡å®šå‘åˆ°ç™»å½•é¡µ
// å¦‚æœç”¨æˆ·å·²ç™»å½•ï¼Œç”± _app.tsx çš„ auth é€»è¾‘å¤„ç†
const Index = () => {
  const router = useRouter();
  
  useEffect(() => {
    // ç›´æ¥è·³è½¬åˆ°ç™»å½•é¡µï¼Œè®©ç™»å½•é€»è¾‘å¤„ç†åç»­è·¯ç”±
    router.replace('/login');
  }, [router]);

  return <Loading />;
};
```

### 3. One API é›†æˆæ¥å£

#### ç”¨æˆ·åŒæ­¥æ¥å£

**ç«¯ç‚¹**: `POST /api/integration/oneapi/user/sync`

```typescript
interface SyncUserRequest {
  fastgptUserId: string;
  email: string;
  username: string;
}

interface SyncUserResponse {
  oneapiUserId: number;
  quota: number;
  token: string;
}
```


### 4. èŠå¤©æ¬¢è¿é¡µè®¾è®¡ï¼ˆæ¸¯è¯é€šé£æ ¼ï¼‰

#### æ¬¢è¿é¡µå¸ƒå±€

**è®¾è®¡è§„èŒƒ**:
- èƒŒæ™¯ï¼šæ·¡è“è‰²æ¸å˜å…‰æ™•æ•ˆæœï¼ˆæ›¿ä»£æ¸¯è¯é€šçš„ç²‰çº¢è‰²ï¼‰
- ä¸­å¿ƒæ˜¾ç¤ºé—®å€™è¯­ï¼ˆæ™®é€šè¯/ç²¤è¯­äº¤æ›¿ï¼‰
- åº•éƒ¨æ˜¾ç¤ºåŠŸèƒ½å¿«æ·å…¥å£
- **å‘é€ç¬¬ä¸€æ¡æ¶ˆæ¯åæ‰åˆ‡æ¢åˆ°æ­£å¸¸èŠå¤©ç•Œé¢**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â‰¡ å…¶ä»–åŠŸèƒ½]        [é²æ¸¯é€š Logo]           [æ–°å»ºå¯¹è¯] [â†—] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚                    â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®                      â”‚
â”‚                   â•±                   â•²                     â”‚
â”‚                  â”‚    æ·¡è“è‰²å…‰æ™•èƒŒæ™¯    â”‚                    â”‚
â”‚                  â”‚                     â”‚                    â”‚
â”‚                  â”‚      ä½ å¥½ï¼Œ         â”‚                    â”‚
â”‚                  â”‚  è«‹å•ä»Šæ—¥æœ‰å’©å¯ä»¥    â”‚                    â”‚
â”‚                  â”‚    å¹«åˆ°ä½ å‘€ï¼Ÿ        â”‚                    â”‚
â”‚                  â”‚                     â”‚                    â”‚
â”‚                   â•²                   â•±                     â”‚
â”‚                    â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯                      â”‚
â”‚                                                             â”‚
â”‚         [å·´å£«è·¯ç·š] [å¤©æ°£] [æ³•å¾‹] [ä¸æ»¿] [ç¿»è­¯]               â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [æŸ¥çœ‹ä¿¡æ¯]  [å¤šå¤šä¸€çœ‹ï¼Œæ›´å¤š]                    [ğŸ“·] [ğŸ¤]  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ å•æˆ‘ä»»ä½•å•é¡Œä¸­æ–‡/ç²µèª/è‹±èªçš†å¯...                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ¬¢è¿é¡µç»„ä»¶

**æ–‡ä»¶ä½ç½®**: `src/pageComponents/chat/WelcomePage.tsx`

```typescript
interface WelcomePageProps {
  onSendMessage: (message: string) => void;
  greeting: string;
  quickActions: QuickAction[];
}

interface QuickAction {
  icon: string;
  label: string;
  prompt: string;
  // å¯é€‰ï¼šå…³è”ç‰¹å®šåº”ç”¨æˆ–çŸ¥è¯†åº“
  appId?: string;      // å…³è”çš„åº”ç”¨ ID
  datasetId?: string;  // å…³è”çš„çŸ¥è¯†åº“ ID
  apiEndpoint?: string; // å…³è”çš„å¤–éƒ¨ API
}

// é»˜è®¤å¿«æ·æ“ä½œï¼ˆå¯åœ¨ config.json ä¸­é…ç½®ï¼‰
const defaultQuickActions: QuickAction[] = [
  { icon: 'ğŸšŒ', label: 'å·´å£«è·¯ç·š', prompt: 'æŸ¥è¯¢å·´å£«è·¯çº¿' },
  { icon: 'ğŸŒ¤ï¸', label: 'å¤©æ°£', prompt: 'ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·' },
  { icon: 'âš–ï¸', label: 'æ³•å¾‹', prompt: 'æ³•å¾‹å’¨è¯¢' },
  { icon: 'ğŸ˜¤', label: 'ä¸æ»¿', prompt: 'æˆ‘æƒ³æŠ•è¯‰' },
  { icon: 'ğŸŒ', label: 'ç¿»è­¯', prompt: 'å¸®æˆ‘ç¿»è¯‘' },
];

// å¿«æ·æŒ‰é’®é¢œè‰²é…ç½®ï¼ˆæ·¡è“è‰²ä¸»é¢˜ï¼‰
const quickActionStyles = {
  background: 'rgba(59, 130, 246, 0.08)',  // æ·¡è“è‰²èƒŒæ™¯
  hoverBackground: 'rgba(59, 130, 246, 0.15)',
  borderColor: 'rgba(59, 130, 246, 0.2)',
  textColor: '#3B82F6',
  iconColor: '#60A5FA',
};
```

**é…ç½®æ–‡ä»¶æ‰©å±•** (`data/config.json`):
```json
{
  "feConfigs": {
    "quickActions": [
      { "icon": "ğŸšŒ", "label": "å·´å£«è·¯ç·š", "prompt": "æŸ¥è¯¢å·´å£«è·¯çº¿" },
      { "icon": "ğŸŒ¤ï¸", "label": "å¤©æ°£", "prompt": "ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·" },
      { "icon": "âš–ï¸", "label": "æ³•å¾‹", "prompt": "æ³•å¾‹å’¨è¯¢", "appId": "legal-app-id" },
      { "icon": "ğŸ˜¤", "label": "ä¸æ»¿", "prompt": "æˆ‘æƒ³æŠ•è¯‰" },
      { "icon": "ğŸŒ", "label": "ç¿»è­¯", "prompt": "å¸®æˆ‘ç¿»è¯‘", "appId": "translate-app-id" }
    ]
  }
}
```

#### çŠ¶æ€ç®¡ç†

```typescript
// èŠå¤©çŠ¶æ€
interface ChatState {
  isWelcomePage: boolean;  // æ˜¯å¦æ˜¾ç¤ºæ¬¢è¿é¡µ
  messages: Message[];
}

// å‘é€ç¬¬ä¸€æ¡æ¶ˆæ¯æ—¶åˆ‡æ¢çŠ¶æ€
const handleSendMessage = (message: string) => {
  setChatState(prev => ({
    ...prev,
    isWelcomePage: false,  // å…³é”®ï¼šå‘é€æ¶ˆæ¯åéšè—æ¬¢è¿é¡µ
    messages: [...prev.messages, { role: 'user', content: message }]
  }));
};
```

### 5. æ™®é€šç”¨æˆ·èŠå¤©ç•Œé¢è®¾è®¡ï¼ˆæ¸¯è¯é€šé£æ ¼ï¼‰

#### ç•Œé¢é£æ ¼ç‰¹ç‚¹

**æ¬¢è¿ç•Œé¢è®¾è®¡**:
- ç®€æ´çš„èŠå¤©ç•Œé¢ï¼Œæ— å¤æ‚åŠŸèƒ½å…¥å£
- **åŒè¯­é—®å€™è¯­äº¤æ›¿æ˜¾ç¤º**ï¼šæ™®é€šè¯å’Œç²¤è¯­
- **æµ…è“è‰²å…‰æ™•æ•ˆæœ**ï¼ˆåŒºåˆ«äºæ¸¯è¯é€šçš„ç²‰çº¢è‰²ï¼‰
- å±…ä¸­çš„è¾“å…¥æ¡†å’Œå‘é€æŒ‰é’®
- é²æ¸¯é€š Logo æ˜¾ç¤ºåœ¨é¡¶éƒ¨

**é—®å€™è¯­é…ç½®**:
```typescript
const greetings = [
  { lang: 'zh-CN', text: 'ä½ å¥½ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©ä½ çš„ï¼Ÿ' },
  { lang: 'zh-HK', text: 'ä½ å¥½ï¼Œæœ‰å’©å¯ä»¥å¹«åˆ°ä½ ï¼Ÿ' },
  { lang: 'zh-CN', text: 'æ¬¢è¿ä½¿ç”¨é²æ¸¯é€šè·¨å¢ƒAIæ™ºèƒ½å¹³å°' },
  { lang: 'zh-HK', text: 'æ­¡è¿ä½¿ç”¨é­¯æ¸¯é€šè·¨å¢ƒAIæ™ºèƒ½å¹³å°' },
];

// äº¤æ›¿æ˜¾ç¤ºé€»è¾‘
const [currentGreeting, setCurrentGreeting] = useState(0);
useEffect(() => {
  const interval = setInterval(() => {
    setCurrentGreeting((prev) => (prev + 1) % greetings.length);
  }, 3000); // æ¯3ç§’åˆ‡æ¢
  return () => clearInterval(interval);
}, []);
```

**æµ…è“è‰²å…‰æ™•æ•ˆæœ CSS**:
```css
.welcome-container {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  background: #f8fafc;
}

.welcome-glow {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 600px;
  height: 600px;
  background: radial-gradient(
    circle at center,
    rgba(59, 130, 246, 0.20) 0%,    /* æµ…è“è‰²æ ¸å¿ƒ */
    rgba(96, 165, 250, 0.12) 30%,   /* æ¸å˜ */
    rgba(147, 197, 253, 0.05) 60%,  /* æ›´æµ… */
    transparent 80%
  );
  border-radius: 50%;
  filter: blur(40px);
  animation: pulse 4s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 0.8; transform: translate(-50%, -50%) scale(1); }
  50% { opacity: 1; transform: translate(-50%, -50%) scale(1.05); }
}
```

#### æ™®é€šç”¨æˆ· vs ç®¡ç†å‘˜ç•Œé¢å¯¹æ¯”

| åŠŸèƒ½ | æ™®é€šç”¨æˆ· | ç®¡ç†å‘˜ |
|-----|---------|-------|
| ç™»å½•åè·³è½¬ | æ¸¯è¯é€šé£æ ¼èŠå¤©ç•Œé¢ `/chat` | ç®¡ç†åå° `/dashboard/agent` |
| å·¦ä¾§å¯¼èˆª | **å®Œå…¨éšè—** | å®Œæ•´æ˜¾ç¤º |
| åº”ç”¨ç®¡ç† | éšè— | æ˜¾ç¤º |
| çŸ¥è¯†åº“ | éšè— | æ˜¾ç¤º |
| ç”¨æˆ·ç®¡ç† | éšè— | æ˜¾ç¤º |
| ä¸ªäººä¸­å¿ƒ | ç®€åŒ–ç‰ˆï¼ˆå¤´åƒä¸‹æ‹‰ï¼šé¢åº¦ã€å……å€¼ã€é€€å‡ºï¼‰ | å®Œæ•´ç‰ˆ |
| èŠå¤©ç•Œé¢é£æ ¼ | **æ¸¯è¯é€šé£æ ¼**ï¼ˆæµ…è“å…‰æ™•ã€åŒè¯­é—®å€™ï¼‰ | æ ‡å‡† FastGPT é£æ ¼ |
| æ¬¢è¿è¯­ | æ™®é€šè¯/ç²¤è¯­äº¤æ›¿ | æ—  |

#### æ™®é€šç”¨æˆ·èŠå¤©ç•Œé¢ç»„ä»¶

**æ–‡ä»¶ä½ç½®**: `src/pageComponents/chat/UserChatWelcome.tsx`

```typescript
interface UserChatWelcomeProps {
  // æ¬¢è¿ç•Œé¢é…ç½®
  welcomeConfig: {
    greetings: { lang: string; text: string }[];
    glowColor: 'blue' | 'pink';  // é»˜è®¤æµ…è“è‰²
    logoUrl: string;
    brandName: string;
  };
  // ç”¨æˆ·ä¿¡æ¯
  user: {
    username: string;
    avatar?: string;
    quota: number;
  };
  // å›è°ƒ
  onSendMessage: (message: string) => void;
}
```

### 6. ç®¡ç†åå°æ¥å£

#### ç”¨æˆ·åˆ—è¡¨æ¥å£

**ç«¯ç‚¹**: `GET /api/admin/users`

```typescript
interface UserListRequest {
  page: number;
  pageSize: number;
  search?: string;
}

interface UserListResponse {
  users: AdminUserType[];
  total: number;
}
```

## Data Models

### FastGPT ç”¨æˆ·æ¨¡å‹æ‰©å±•

```typescript
interface UserType {
  _id: string;
  email: string;
  username: string;
  password: string;  // åŠ å¯†å­˜å‚¨
  role: 'user' | 'admin' | 'root';
  status: 'active' | 'disabled';
  
  // One API å…³è”
  oneapiUserId?: number;
  oneapiToken?: string;
  
  // é¢åº¦ä¿¡æ¯ï¼ˆç¼“å­˜ï¼‰
  quota?: number;
  usedQuota?: number;
  
  createdAt: Date;
  lastLoginAt: Date;
}
```

### é…ç½®æ¨¡å‹

```typescript
interface FeConfigs {
  systemTitle: string;
  enableUserChatOnly: boolean;  // å¯ç”¨çº¯èŠå¤©æ¨¡å¼
  defaultChatAppId: string;
  
  // æ³¨å†Œé…ç½®
  register_method: ('email' | 'phone')[];
  login_method: ('email' | 'phone')[];
  
  // One API é›†æˆ
  oneapiBaseUrl: string;
  oneapiAdminToken: string;
  initialQuota: number;  // æ–°ç”¨æˆ·åˆå§‹é¢åº¦
}
```

## Correctness Properties

*A property is a characteristic or behavior that should hold true across all valid executions of a system.*

### Property 1: é‚®ç®±æ ¼å¼éªŒè¯

*For any* è¾“å…¥çš„é‚®ç®±å­—ç¬¦ä¸²ï¼Œå¦‚æœä¸ç¬¦åˆæ ‡å‡†é‚®ç®±æ ¼å¼ï¼Œç³»ç»Ÿåº”æ‹’ç»æ³¨å†Œã€‚

**Validates: Requirements 2.5**

### Property 2: ç”¨æˆ·æ³¨å†ŒåŒç³»ç»ŸåŒæ­¥

*For any* æˆåŠŸæ³¨å†Œçš„ç”¨æˆ·ï¼ŒFastGPT å’Œ One API ä¸­éƒ½åº”å­˜åœ¨å¯¹åº”çš„ç”¨æˆ·è®°å½•ã€‚

**Validates: Requirements 2.4, 8.1, 8.3**

### Property 3: è§’è‰²è·¯ç”±ä¸€è‡´æ€§

*For any* ç™»å½•æˆåŠŸçš„ç”¨æˆ·ï¼Œç³»ç»Ÿåº”æ ¹æ®å…¶è§’è‰²é‡å®šå‘åˆ°æ­£ç¡®çš„é¡µé¢ï¼šæ™®é€šç”¨æˆ·åˆ°æ¸¯è¯é€šé£æ ¼èŠå¤©ç•Œé¢ï¼Œç®¡ç†å‘˜åˆ°ç®¡ç†åå°ã€‚

**Validates: Requirements 3.1, 3.2, 3.5**

### Property 4: é¢åº¦åŒæ­¥ä¸€è‡´æ€§

*For any* ç”¨æˆ·çš„é¢åº¦å˜æ›´ï¼ŒFastGPT æ˜¾ç¤ºçš„é¢åº¦åº”ä¸ One API ä¸­çš„å®é™…é¢åº¦ä¿æŒä¸€è‡´ã€‚

**Validates: Requirements 4.5, 8.2**

### Property 5: æ™®é€šç”¨æˆ·ç•Œé¢æƒé™

*For any* æ™®é€šç”¨æˆ·è§’è‰²ï¼ŒèŠå¤©ç•Œé¢ä¸åº”æ˜¾ç¤ºåº”ç”¨ç®¡ç†ã€çŸ¥è¯†åº“ç­‰ç®¡ç†åŠŸèƒ½å…¥å£ï¼Œä¸”åº”æ˜¾ç¤ºæ¸¯è¯é€šé£æ ¼çš„æ¬¢è¿ç•Œé¢ã€‚

**Validates: Requirements 7.1**

## Error Handling

### ç”¨æˆ·æ³¨å†Œé”™è¯¯

| é”™è¯¯åœºæ™¯ | é”™è¯¯ç  | å¤„ç†æ–¹å¼ |
|---------|-------|---------|
| é‚®ç®±æ ¼å¼æ— æ•ˆ | 400 | å‰ç«¯éªŒè¯ + åç«¯éªŒè¯ |
| é‚®ç®±å·²æ³¨å†Œ | 409 | æç¤ºç”¨æˆ·é‚®ç®±å·²å­˜åœ¨ |
| éªŒè¯ç é”™è¯¯ | 401 | æç¤ºéªŒè¯ç é”™è¯¯æˆ–å·²è¿‡æœŸ |

### é¢åº¦ç›¸å…³é”™è¯¯

| é”™è¯¯åœºæ™¯ | é”™è¯¯ç  | å¤„ç†æ–¹å¼ |
|---------|-------|---------|
| é¢åº¦ä¸è¶³ | 402 | æç¤ºç”¨æˆ·å……å€¼ |
| å…‘æ¢ç æ— æ•ˆ | 400 | æç¤ºå…‘æ¢ç æ— æ•ˆæˆ–å·²ä½¿ç”¨ |

## Testing Strategy

### å•å…ƒæµ‹è¯•
- é‚®ç®±æ ¼å¼éªŒè¯å‡½æ•°
- ç”¨æˆ·è§’è‰²åˆ¤æ–­å‡½æ•°
- é—®å€™è¯­åˆ‡æ¢é€»è¾‘

### é›†æˆæµ‹è¯•
- ç”¨æˆ·æ³¨å†Œæµç¨‹ï¼ˆFastGPT + One APIï¼‰
- é¢åº¦åŒæ­¥æµç¨‹

### E2E æµ‹è¯•
- å®Œæ•´æ³¨å†Œç™»å½•æµç¨‹
- æ™®é€šç”¨æˆ·èŠå¤©ç•Œé¢æ˜¾ç¤º
- ç®¡ç†å‘˜åå°è®¿é—®

## Implementation Notes

### Logo æ–‡ä»¶é—®é¢˜ä¿®å¤

å½“å‰é—®é¢˜ï¼š`LOGO_ICON` é…ç½®ä¸º `/icon/logo.png`ï¼Œä½†å®é™…æ–‡ä»¶æ˜¯ `logo.svg`ã€‚

ä¿®å¤æ–¹æ¡ˆï¼šä¿®æ”¹å¸¸é‡ä¸º `/icon/logo.svg`

### ç¯å¢ƒå˜é‡é…ç½®

```env
# One API é›†æˆ
ONEAPI_BASE_URL=https://api.airscend.com
ONEAPI_ADMIN_TOKEN=sk-xxx
ONEAPI_INITIAL_QUOTA=100000
```
